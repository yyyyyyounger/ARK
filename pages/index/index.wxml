<!-- 彈出類 -->
<van-toast id="van-toast" />
<!-- show_popup -->
<van-popup 
z-index="9999999"
show="{{ false }}"
position="top"
duration="700"
safe-area-inset-top	
safe-area-inset-bottom	
round
closeable
close-on-click-overlay
close-icon-position="bottom-right"
bind:close="closePopup"
>
	<!-- 未登錄用戶，展示ARK用途 -->
	<view class="flexCenter">
		<view>ARK小程式是什麼？</view>
		<view>立志成為UMer人手一份的UM All In One小程式，也作為FST ARK活動運作平台！</view><text>\n</text>
		<view>ARK小程式能做什麼？</view>
		<view>ARK開課、Follow課程提醒、巴士報站、書院菜單等等等等 ~</view><text>\n</text>
		<view>ARK 方舟活動 是什麼？</view>
		<view>沒有專業限制！沒有年級限制！沒有內容限制！舉辦一場由同學自主發起的知識分享會！詳情查看首頁頂部協議入口！</view><text>\n</text>
	</view>

	<!-- 已登錄用戶則顯示這是來到ARK的第多少天 -->

	<!-- <view class="flexCenter" wx:if="{{userCloudData}}">
		歡迎回來！第 {{arkId}} 位ARKer ！
	</view> -->
</van-popup>

<!-- 公告區 -->
<view style="margin-top: 12px;"></view>
<van-notice-bar
  left-icon="volume-o"
  color="#1989fa"
  background="#ecf9ff"
  text="{{indexAnnouncement}}"
	bindtap="handleTapAnnouncement"
/>
<!-- 輪播圖 -->
<swiper class="card-swiper square-dot" indicator-dots="true" circular="true" autoplay="true" interval="5000" duration="500" bindchange="cardSwiper" indicator-color="#8799a3" indicator-active-color="#3498DB" style="margin-top: -8px;">
  <swiper-item wx:for="{{swiperList}}" wx:key="id" class="{{cardCur==index?'cur':''}}">
    <view class="swiper-item" bindtap="clickImg" data-id="{{item.id}}">
      <image src="{{item.url}}" mode="aspectFill" wx:if="{{item.type=='image'}}"></image>
    </view>
  </swiper-item>
</swiper>

<!-- Follow課程展示區 - 棄用狀態 -->
<!-- <view class="cu-bar bg-white margin-top">
	<view class="action">
		<text class="cuIcon-title text-themeBlue"></text>我Follow的分享
	</view>
</view> -->
<!-- <van-row wx:if="{{recentCourseInfoArray[0]}}">
	<van-col span="16">
		<van-collapse value="{{ active_collapse }}" accordion bind:change="onChange_collapse">
			<van-collapse-item wx:for="{{recentCourseInfoArray}}" wx:key="index" title="{{recentCourseInfoArray[index].courseInfoInput[1].input}}" name="{{index}}" style="position:relative;left:38rpx;">
				<view bindtap="jumpToCourseDetail" data-courseid="{{recentCourseInfoArray[index]._id}}">
					<view>時間：{{recentCourseInfoArray[index].courseInfoInput[5].input[1]}} - {{recentCourseInfoArray[index].courseInfoInput[5].input[2]}}</view>
					<view>地點：{{recentCourseInfoArray[index].courseInfoInput[4].input}} ...</view>
				</view>
			</van-collapse-item>
		</van-collapse>
	</van-col>
	steps步驟條
  <van-col span="8">
		<van-steps
			steps	=	"{{ steps }}"
			active	=	"{{ active_col }}"
			direction	=	"vertical"
			active-color = "#3498DB"
			bind:click-step = "bindTapSteps"
		/>
	</van-col>
</van-row>
<van-divider wx:if="{{!recentCourseInfoArray[0]}}" contentPosition="center">快挑選些分享加入吧！</van-divider> -->

<!-- 管理員權限 - 列出待審核課程 -->
<block wx:if="{{admin}}">
	<block wx:if="{{checkingCourseList[0]}}">
		<view class="cu-bar bg-white margin-top" >
			<view class="action">
				<text class="cuIcon-title text-themeBlue"></text>待審核課程
			</view>
		</view>
		<van-collapse value="{{ active_collapse_check }}" accordion bind:change="onChange_collapse_check" >
			<van-collapse-item wx:for="{{checkingCourseList}}" wx:key="index" title="{{checkingCourseList[index].courseInfoInput[1].input}}" name="{{index}}">
				<view bindtap="jumpToCourseDetail" data-courseid="{{checkingCourseList[index]._id}}">
					<view>{{checkingCourseList[index].courseInfoInput[6].input}}</view>
					<view>日期：{{checkingCourseList[index].courseInfoInput[5].input[0]}}</view>
					<view>時間：{{checkingCourseList[index].courseInfoInput[5].input[1]}} - {{checkingCourseList[index].courseInfoInput[5].input[2]}}</view>
					<!-- <view>地點：{{checkingCourseList[index].courseInfoInput[4].input}}</view> -->
				</view>
			</van-collapse-item>
		</van-collapse>
	</block>
</block>

<!-- 主頁功能按鈕 -->
<!-- 使用wx的navigator組件跳轉 -->
<!-- <navigator open-type="navigate" class="nav-li" style="background-color:{{item.color}}" 
wx:for="{{buttonArr}}" wx:key="index" 
url="/pages/{{item.path}}">
	<view class="nav-li-img">
		<van-image mode="aspectFill" src="{{item.icon}}"  />
	</view>
	<view class="nav-li-title"><em>{{item.name}}</em></view>
</navigator> -->

<view class="grid col-2 padding-sm">
  <view class="padding-sm" wx:for="{{buttonArr}}" wx:key="index" >
    <view class="radius padding text-center shadow-blur" style="background-color: {{item.color}}; color: var(--white); border-radius: 15rpx; "
		data-name="{{item.shortName}}" bindtap="indexButtonJump">
      <text class="text-lg">{{item.name}}</text>
    </view>
  </view>
</view>

<!-- <view 
	wx:for="{{buttonArr}}" 
	wx:key="name"
>
{{item.name}}
</view><text>\n</text> -->

<!-- 關於ARK -->
<block>
	<view class="cu-bar bg-white" bindtap="shipTouched">
		<view class="action">
			<text class="cuIcon-title text-themeBlue"></text>關於ARK
			<van-icon name="arrow"/>
		</view>
	</view>
	<!-- <text>項目開始時間：2021/06/03</text> -->
	<!-- <text> 今天是：{{today}} </text> -->
	<view class="text-grey word"><text style="padding-left: 15px;"></text>
		<text bindtap="shipTouched" decode="true">ARK已經航行&nbsp;</text>
		<text bindtap="shipTouched" class="text-gray" style="font-weight:bold;">{{durationDay}}</text>
		<text bindtap="shipTouched" decode="true">&nbsp;天了&nbsp;&nbsp;</text>
		<image src="https://i.niupic.com/images/2021/09/12/9vbZ.png" class="{{shipClass}}" bindtap="shipRoll"></image><!--小船~-->
		<image src="https://i0.hdslb.com/bfs/album/dcd37543cdac0046b247392e87f5d2879d50755c.png" class="floodAnim"></image><!--海浪~-->
	</view>
</block>

<!-- 常见问题Q&A -->
<block>
	<view class="cu-bar bg-white" bindtap="displayQandA">
		<view class="action colorShining">
			<text class="cuIcon-title text-themeBlue"></text>常見問題Q&A
			<van-icon name="arrow" wx:if="{{!showQandA}}"/><!-- 收起和打开时图标变化 -->
			<van-icon name="arrow-down" wx:else/>
		</view>
	</view>

	<!-- QandA for循環渲染 --> <!-- 不会做动画 摆烂 - by Rainbow-->
	<view wx:for="{{QandAlist}}" wx:key="id" hidden="{{!showQandA}}" bindtap="displayQandA">
		<view class="QandA-Q">
			{{item.question}}
		</view>
		<text>\n</text>
		<view class="QandA-A">
			{{item.answer}}
		</view>
		<text>\n</text>
	</view>
</block>

<!-- 一言 -->
<block>
	<view bindtap="cloudGetOneMoto">
		<view class="cu-bar bg-white">
			<view class="action">
				<text class="cuIcon-title text-themeBlue"></text>一言<text class="text-gray" style="margin-left: 10rpx;">(點擊刷新)</text>
			</view>
		</view>
		<view class="text-grey">
			<view class="word" ><text style="padding-left: 15px;"></text>{{moto.hitokoto}}</view>
			<view class="author text-gray" >—— 「{{(!moto.from_who) ? moto.from : moto.from_who}}」</view>
		</view>
	</view>
</block>

<van-divider contentPosition="center">正在開發更多內容！敬請期待！</van-divider>

<button bindtap="jumpToTestPage" wx:if="{{admin}}">跳轉測試頁（請不要擅自進入）</button>

<!-- 免除自定義tabbar阻擋 -->
<view class="bottom-watch"></view>